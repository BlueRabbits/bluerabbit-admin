angular.module("RDash",["ui.bootstrap","ui.router","ngCookies"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"templates/page_login.html"}).state("department",{url:"/department",templateUrl:"templates/page_department.html"}).state("category",{url:"/category",templateUrl:"templates/page_category.html"}).state("addProduct",{url:"/addProduct",templateUrl:"templates/page_addProducts.html"}).state("addTodayDeals",{url:"/addTodayDeals",templateUrl:"templates/page_todayDeals.html"}).state("updateCategory",{url:"/updateCategory",templateUrl:"templates/page_updateCategory.html"}).state("UpdateTodayDeal",{url:"/UpdateTodayDeal",templateUrl:"templates/page_UpdateTodayDeal.html"}).state("updateProduct",{url:"/updateProduct",templateUrl:"templates/page_updateProduct.html"}).state("orderManagement",{url:"/orderManagement",templateUrl:"templates/page_orderManagement.html"}).state("userDetails",{url:"/userDetails",templateUrl:"templates/page_UserDetails.html"})}]);
function AlertsCtrl(e){e.alerts=[{type:"success",msg:"Thanks for visiting! Feel free to create pull requests to improve the dashboard!"},{type:"danger",msg:"Found a bug? Create an issue with as many details as you can."}],e.addAlert=function(){e.alerts.push({msg:"Another alert!"})},e.closeAlert=function(t){e.alerts.splice(t,1)}}angular.module("RDash").controller("AlertsCtrl",["$scope",AlertsCtrl]);
function MasterCtrl(e,t,o,r,a,s,n,i){e.showToastMessage=!1,console.log("$cookieStore.get('AdminToken')",t.get("AdminToken")),t.get("AdminToken")?e.showDashboard=!0:e.showDashboard=!1,"superadmin"===t.get("adminName")?(e.showOrderManagement=!0,e.orderHeight="0px",e.orderColor="#2d3e63"):e.showOrderManagement=!1;var c=992;e.getWidth=function(){return window.innerWidth},e.$watch(e.getWidth,function(o,r){o>=c?angular.isDefined(t.get("toggle"))?e.toggle=!!t.get("toggle"):e.toggle=!0:e.toggle=!1}),e.toggleSidebar=function(){e.toggle=!e.toggle,t.put("toggle",e.toggle)},window.onresize=function(){e.$apply()};var d="http://ec2-35-164-239-44.us-west-2.compute.amazonaws.com:9000",l=t.get("AdminToken");e.loginAdmin=function(){e.showDashboard=!0;var r={email:e.email,password:e.password},a={headers:{"Content-Type":"application/json"}};o.post(d+"/auth/local",r,a).success(function(o,r,a,s){e.loginData=o,console.log("loginData",o),t.put("AdminToken",o.token),t.put("adminId",o._id),t.put("adminName",o.name),t.put("adminEmailId",e.email),t.put("AdminloggedIn",!0),location.reload(!0),"superadmin"===t.get("adminName")&&(window.location.href="#/orderManagement"),"admin"===t.get("adminName")&&(window.location.href="#/category")}).error(function(t,o,r,a){e.erroralert=!0,e.errorMessage=t.message,e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.logout=function(){t.remove("adminId"),t.remove("AdminToken"),t.remove("adminEmailId"),t.put("AdminloggedIn",!1),location.reload(!0),window.location.href="#/login"},e.postDepartment=function(){var t={name:e.departmentName,description:e.descriptionOfDepartment,isActive:e.departmentIsActive},r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.post(d+"/api/departments",t,r).success(function(t,o,r,a){e.PostDataResponse=t,console.log("dataa",t),alert("Department  added")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.postCategory=function(){var t={name:e.categoryName,department:1,isActive:e.categoryIsActive},r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.post(d+"/api/categories",t,r).success(function(t,o,r,a){e.PostDataResponse=t,console.log("dataa",t),alert("New Category Added!!")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getDepartment=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/departments",t).success(function(t,o,r,a){e.getDepartmentList=t,console.log("get departments",t),console.log("getDepartmentList",e.getDepartmentList)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getDepartment(),e.getCategory=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/categories",t).success(function(t,o,r,a){e.getCategoriesList=t,console.log("get Categories",t),console.log("categoryName",e.categoryName)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getCategory(),e.getCategoryName=function(t){console.log("categoryName",t),e.categoryName=t},e.getdepartmentId=function(t){console.log("deptName",t),e.deptName=t},e.postProduct=function(){var t="no subcat",r={name:e.productName,description:e.productDescription,dept:e.deptName,cat:e.categoryName,subCat:t,sku:"abcd12345",brand:"abcd",s1:e.productImageUrl1,s2:e.productImageUrl2,s3:e.productImageUrl3,p1:e.productOffer,p2:"abcd",mainImageUrl:e.productImageUrl,vendorID:100,quantity:e.productquantity,listPrice:e.productlistPrice,salePrice:e.productSalePrice,discountedPrice:e.discountedPrice,instock:e.instock,isActive:e.productisActive},a={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.post(d+"/api/products",r,a).success(function(t,o,r,a){e.PostDataResponse=t,console.log("dataa",t),alert("New Product Added"),e.updateAutocomplete()}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.updateAutocomplete=function(){var t={},r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.post(d+"/api/products/updateAutoComplete",t,r).success(function(t,o,r,a){e.updateAutocomplete=t,console.log("updateAutocomplete",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getProduct=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/products",t).success(function(t,o,r,a){e.getProductList=t,console.log("get products",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getProduct(),e.getTodaysDeal=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/todaysDeal",t).success(function(t,o,r,a){e.getTodayDealsList=t,console.log("get getTodayDealsList",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getTodaysDeal(),e.postTodayDeals=function(){var t={fromDate:e.fromDate,toDate:e.toDate,toTime:e.toTime,fromTime:e.fromTime,product:e.productid},r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.post(d+"/api/todaysDeal",t,r).success(function(t,o,r,a){e.todayDealsPost=t,console.log("dataa",t),alert("Product added to Todays Deal")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getproductId=function(t){console.log(t);for(var o=0;o<e.getProductList.length;o++)t===e.getProductList[o].name&&(e.productid=e.getProductList[o]._id);console.log(e.productid)},e.editCategory=function(t,o,r,a){console.log(t,o,r,a),e.cat_Id=t,e.categoryName=o,e.categoryId=r,e.categoryIsActive=a,e.showCategoryButton=!0},e.updateCategory=function(){e.showCategoryButton=!0;var t={name:e.categoryName,department:1,isActive:e.categoryIsActive},r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.put(d+"/api/categories/"+e.cat_Id,t,r).success(function(t,o,r,a){e.updateCategory=t,console.log("updateCategory",t),e.getCategory(),location.reload(!0),alert("Updated Category")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.deleteCategory=function(t){console.log("catId",t);var r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o["delete"](d+"/api/categories/"+t,r).success(function(t,o,r,a){console.log("delete category",t),e.getCategory(),alert("Deleted category")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.editProduct=function(t){e.showProductButton=!0,e.productId=t;for(var o=0;o<e.getProductList.length;o++)e.getProductList[o]._id===t&&(e.productName=e.getProductList[o].name,e.productDescription=e.getProductList[o].description,e.departmentSelected=e.getProductList[o].dept,e.categorySelected=e.getProductList[o].cat,e.productOffer=e.getProductList[o].p1,e.productImageUrl=e.getProductList[o].mainImageUrl,e.productImageUrl1=e.getProductList[o].s1,e.productImageUrl2=e.getProductList[o].s2,e.productImageUrl3=e.getProductList[o].s3,e.productquantity=e.getProductList[o].quantity,e.productlistPrice=e.getProductList[o].listPrice,e.productSalePrice=e.getProductList[o].salePrice,e.discountedPrice=e.getProductList[o].discountedPrice,e.instock=e.getProductList[o].instock,e.productisActive=e.getProductList[o].isActive)},e.updateProduct=function(){var t="no subcat",r={name:e.productName,description:e.productDescription,dept:e.departmentSelected,cat:e.categorySelected,subCat:t,sku:"abcd12345",brand:"abcd",s1:e.productImageUrl1,s2:e.productImageUrl2,s3:e.productImageUrl3,p1:e.productOffer,p2:"abcd",mainImageUrl:e.productImageUrl,vendorID:100,quantity:e.productquantity,listPrice:e.productlistPrice,salePrice:e.productSalePrice,discountedPrice:e.discountedPrice,instock:e.instock,isActive:e.productisActive},a={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.put(d+"/api/products/"+e.productId,r,a).success(function(t,o,r,a){e.updateProd=t,console.log("updateProduct",t),e.getProduct(),alert("Updated Product")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.deleteProduct=function(t){console.log("productId",t);var r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o["delete"](d+"/api/products/"+t,r).success(function(t,o,r,a){console.log("delete product",t),e.getProduct(),alert("Product Deleted")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.editTodayDeals=function(t){console.log(t);for(var o=0;o<e.getTodayDealsList.length;o++)e.getTodayDealsList[o]._id===t&&(e.fromDate=e.getTodayDealsList[o].fromDate)},e.deleteTodayDeals=function(t){console.log("dealId",t);var r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o["delete"](d+"/api/todaysDeal/"+t,r).success(function(t,o,r,a){console.log("delete product",t),e.getTodaysDeal(),alert("Deleted Todays Deal")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getAllOrders=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/orders",t).success(function(t,o,r,a){e.getAllOrdersList=t,console.log("get getAllOrdersList",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getAllOrders(),e.getAllOrderStatus=function(){var t={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/orderStatus",t).success(function(t,o,r,a){e.getAllOrdersStatusList=t,console.log("get getAllOrdersStatusList",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getAllOrderStatus(),e.orderStatusChangedValue=function(t){console.log("orderStatusname",t),e.selectedOrderStatusId=t;for(var o=0;o<e.getAllOrdersStatusList.length;o++)e.getAllOrdersStatusList[o]._id==t&&(e.orderStatusObj=e.getAllOrdersStatusList[o])},e.editOrderStatus=function(t){var r={orderStatus:e.orderStatusObj},a={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.put(d+"/api/orders/"+t,r,a).success(function(t,o,r,a){e.updateCategory=t,console.log("updateCategory",t),e.getAllOrders(),alert("Updated orders")}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.invoiceDetails=function(t){console.log(t);var r={headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"}};o.get(d+"/api/orders/"+t,r).success(function(t,o,r,a){e.getByorderId=t,console.log("$scope.getByorderId",e.getByorderId)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.printInvoice=function(){var e=$("#printArea").html(),t=$("#printframe")[0].contentWindow.document;$("#invoiceModal").css({display:"block"}),t.open(),t.write(e),t.close(),$("#printframe")[0].contentWindow.print()},e.exportToExcel=function(){window.open("data:application/vnd.ms-excel,"+$("#orderDetailExport").html())},e.filterBydate=function(t){console.log("toDate",t);var o=new Date(t).toString().split(" ").slice(0,4).join(" ");console.log("todayDate",o);for(var r=0;r<e.getAllOrdersList.length;r++){e.ordatesList=e.getAllOrdersList[r].orderDate,console.log("$scope.ordatesList",e.ordatesList);var a=new Date(e.ordatesList);a.toString();var s=new Date(e.ordatesList).toString().split(" ").slice(0,4).join(" ");console.log("ordatesList",s),o==s&&(e.dateList=e.ordatesList,console.log("$scope.dateList",e.ordatesList))}},e.showAllOrders=function(){e.dateList=""},e.getAllUsers=function(){var t={headers:{"Content-Type":"application/json"}};o.get(d+"/api/users",t).success(function(t,o,r,a){e.getAllUserList=t,console.log("get getAllUserList",t)}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})},e.getAllUsers(),e.updateUser=function(t,r){console.log("sel",e.sel),e.selectedValue=$("#sel11 :selected").val();var a={headers:{"Content-Type":"application/json"}},s={isactive:r};o.put(d+"/api/users/"+t,s,a).success(function(t,o,r,a){e.getIsActiveUpdated=t,console.log("get getAllUserList",t),e.getAllUsers()}).error(function(t,o,r,a){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+r+"<hr />config: "+a})}}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","$http","$location","$state","$stateParams","$filter",MasterCtrl]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"=?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);