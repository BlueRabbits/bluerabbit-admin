angular.module("RDash",["ui.bootstrap","ui.router","ngCookies"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"templates/page_login.html"}).state("department",{url:"/department",templateUrl:"templates/page_department.html"}).state("category",{url:"/category",templateUrl:"templates/page_category.html"}).state("addProduct",{url:"/addProduct",templateUrl:"templates/page_addProducts.html"}).state("addTodayDeals",{url:"/addTodayDeals",templateUrl:"templates/page_todayDeals.html"}).state("updateCategory",{url:"/updateCategory",templateUrl:"templates/page_updateCategory.html"}).state("UpdateTodayDeal",{url:"/UpdateTodayDeal",templateUrl:"templates/page_UpdateTodayDeal.html"}).state("updateProduct",{url:"/updateProduct",templateUrl:"templates/page_updateProduct.html"})}]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"=?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);
function AlertsCtrl(e){e.alerts=[{type:"success",msg:"Thanks for visiting! Feel free to create pull requests to improve the dashboard!"},{type:"danger",msg:"Found a bug? Create an issue with as many details as you can."}],e.addAlert=function(){e.alerts.push({msg:"Another alert!"})},e.closeAlert=function(t){e.alerts.splice(t,1)}}angular.module("RDash").controller("AlertsCtrl",["$scope",AlertsCtrl]);
function MasterCtrl(t,e,o,a,r,s,n){t.showToastMessage=!1,e.get("AdminToken")?t.showDashboard=!0:t.showDashboard=!1;var c=992;t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(o,a){o>=c?angular.isDefined(e.get("toggle"))?t.toggle=!!e.get("toggle"):t.toggle=!0:t.toggle=!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,e.put("toggle",t.toggle)},window.onresize=function(){t.$apply()};var i="http://ec2-54-187-15-116.us-west-2.compute.amazonaws.com:9000",d=e.get("AdminToken");t.loginAdmin=function(){t.showDashboard=!0;var a={email:t.email,password:t.password},r={headers:{"Content-Type":"application/json"}};o.post(i+"/auth/local",a,r).success(function(o,a,r,s){t.loginData=o,console.log("loginData",o),e.put("AdminToken",o.token),e.put("adminId",o._id),e.put("adminEmailId",t.email),e.put("AdminloggedIn",!0),location.reload(!0),window.location.href="#/updateCategory"}).error(function(e,o,a,r){t.erroralert=!0,t.errorMessage=e.message,t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.logout=function(){e.remove("adminId"),e.remove("AdminToken"),e.remove("adminEmailId"),e.put("AdminloggedIn",!1),location.reload(!0),window.location.href="#/login"},t.postDepartment=function(){var e={name:t.departmentName,description:t.descriptionOfDepartment,isActive:t.departmentIsActive},a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.post(i+"/api/departments",e,a).success(function(e,o,a,r){t.PostDataResponse=e,console.log("dataa",e),alert("Department  added")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.postCategory=function(){var e={name:t.categoryName,department:t.categoryId,isActive:t.categoryIsActive},a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.post(i+"/api/categories",e,a).success(function(e,o,a,r){t.PostDataResponse=e,console.log("dataa",e),alert("New Category Added!!")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getDepartment=function(){var e={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.get(i+"/api/departments",e).success(function(e,o,a,r){t.getDepartmentList=e,console.log("get departments",e),console.log("getDepartmentList",t.getDepartmentList)}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getDepartment(),t.getCategory=function(){var e={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.get(i+"/api/categories",e).success(function(e,o,a,r){t.getCategoriesList=e,console.log("get Categories",e),console.log("categoryName",t.categoryName)}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getCategory(),t.getCategoryName=function(e){console.log("categoryName",e),t.categoryName=e},t.getdepartmentId=function(e){console.log("deptName",e),t.deptName=e},t.postProduct=function(){var e="no subcat",a={name:t.productName,description:t.productDescription,dept:t.deptName,cat:t.categoryName,subCat:e,sku:"abcd12345",brand:"abcd",s1:t.productImageUrl1,s2:t.productImageUrl2,s3:t.productImageUrl3,p1:t.productOffer,p2:"abcd",mainImageUrl:t.productImageUrl,vendorID:100,quantity:t.productquantity,listPrice:t.productlistPrice,salePrice:t.productSalePrice,discountedPrice:t.discountedPrice,instock:t.instock,isActive:t.productisActive},r={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.post(i+"/api/products",a,r).success(function(e,o,a,r){t.PostDataResponse=e,console.log("dataa",e),alert("New Product Added"),t.updateAutocomplete()}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.updateAutocomplete=function(){var e={},a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.post(i+"/api/products/updateAutoComplete",e,a).success(function(e,o,a,r){t.updateAutocomplete=e,console.log("updateAutocomplete",e)}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getProduct=function(){var e={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.get(i+"/api/products",e).success(function(e,o,a,r){t.getProductList=e,console.log("get products",e)}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getProduct(),t.getTodaysDeal=function(){var e={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.get(i+"/api/todaysDeal",e).success(function(e,o,a,r){t.getTodayDealsList=e,console.log("get getTodayDealsList",e)}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getTodaysDeal(),t.postTodayDeals=function(){var e={fromDate:t.fromDate,toDate:t.toDate,toTime:t.toTime,fromTime:t.fromTime,product:t.productid},a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.post(i+"/api/todaysDeal",e,a).success(function(e,o,a,r){t.todayDealsPost=e,console.log("dataa",e),alert("Product added to Todays Deal")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.getproductId=function(e){console.log(e);for(var o=0;o<t.getProductList.length;o++)e===t.getProductList[o].name&&(t.productid=t.getProductList[o]._id);console.log(t.productid)},t.editCategory=function(e,o,a,r){console.log(e,o,a,r),t.cat_Id=e,t.categoryName=o,t.categoryId=a,t.categoryIsActive=r,t.showCategoryButton=!0},t.updateCategory=function(){t.showCategoryButton=!0;var e={name:t.categoryName,department:t.categoryId,isActive:t.categoryIsActive},a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.put(i+"/api/categories/"+t.cat_Id,e,a).success(function(e,o,a,r){t.updateCategory=e,console.log("updateCategory",e),t.getCategory(),location.reload(!0),alert("Updated Category")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.deleteCategory=function(e){console.log("catId",e);var a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o["delete"](i+"/api/categories/"+e,a).success(function(e,o,a,r){console.log("delete category",e),t.getCategory(),alert("Deleted category")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.editProduct=function(e){t.showProductButton=!0,t.productId=e;for(var o=0;o<t.getProductList.length;o++)t.getProductList[o]._id===e&&(t.productName=t.getProductList[o].name,t.productDescription=t.getProductList[o].description,t.departmentSelected=t.getProductList[o].dept,t.categorySelected=t.getProductList[o].cat,t.productOffer=t.getProductList[o].p1,t.productImageUrl=t.getProductList[o].mainImageUrl,t.productImageUrl1=t.getProductList[o].s1,t.productImageUrl2=t.getProductList[o].s2,t.productImageUrl3=t.getProductList[o].s3,t.productquantity=t.getProductList[o].quantity,t.productlistPrice=t.getProductList[o].listPrice,t.productSalePrice=t.getProductList[o].salePrice,t.discountedPrice=t.getProductList[o].discountedPrice,t.instock=t.getProductList[o].instock,t.productisActive=t.getProductList[o].isActive)},t.updateProduct=function(){var e="no subcat",a={name:t.productName,description:t.productDescription,dept:t.departmentSelected,cat:t.categorySelected,subCat:e,sku:"abcd12345",brand:"abcd",s1:t.productImageUrl1,s2:t.productImageUrl2,s3:t.productImageUrl3,p1:t.productOffer,p2:"abcd",mainImageUrl:t.productImageUrl,vendorID:100,quantity:t.productquantity,listPrice:t.productlistPrice,salePrice:t.productSalePrice,discountedPrice:t.discountedPrice,instock:t.instock,isActive:t.productisActive},r={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o.put(i+"/api/products/"+t.productId,a,r).success(function(e,o,a,r){t.updateProd=e,console.log("updateProduct",e),t.getProduct(),alert("Updated Product")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.deleteProduct=function(e){console.log("productId",e);var a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o["delete"](i+"/api/products/"+e,a).success(function(e,o,a,r){console.log("delete product",e),t.getProduct(),alert("Product Deleted")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},t.editTodayDeals=function(e){console.log(e);for(var o=0;o<t.getTodayDealsList.length;o++)t.getTodayDealsList[o]._id===e&&(t.fromDate=t.getTodayDealsList[o].fromDate)},t.deleteTodayDeals=function(e){console.log("dealId",e);var a={headers:{Authorization:"Bearer "+d,"Content-Type":"application/json"}};o["delete"](i+"/api/todaysDeal/"+e,a).success(function(e,o,a,r){console.log("delete product",e),t.getTodaysDeal(),alert("Deleted Todays Deal")}).error(function(e,o,a,r){t.ResponseDetails="Data: "+e+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})}}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","$http","$location","$state","$stateParams",MasterCtrl]);