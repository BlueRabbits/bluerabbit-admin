angular.module("RDash",["ui.bootstrap","ui.router","ngCookies"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"templates/page_login.html"}).state("department",{url:"/department",templateUrl:"templates/page_department.html"}).state("category",{url:"/category",templateUrl:"templates/page_category.html",name:"category"}).state("addProduct",{url:"/addProduct",templateUrl:"templates/page_addProducts.html"}).state("addTodayDeals",{url:"/addTodayDeals",templateUrl:"templates/page_todayDeals.html"}).state("updateCategory",{url:"/updateCategory",templateUrl:"templates/page_updateCategory.html"}).state("UpdateTodayDeal",{url:"/UpdateTodayDeal",templateUrl:"templates/page_UpdateTodayDeal.html"}).state("updateProduct",{url:"/updateProduct",templateUrl:"templates/page_updateProduct.html"}).state("orderManagement",{url:"/orderManagement",templateUrl:"templates/page_orderManagement.html"}).state("overView",{url:"/overView",templateUrl:"templates/overView.html"}).state("feedbacks",{url:"/feedbacks",templateUrl:"templates/feedbacks.html"}).state("locationDeliver",{url:"/locationDeliver",templateUrl:"templates/locationDeliver.html"}).state("scoutLoc",{url:"/scoutLoc",templateUrl:"templates/scoutLoc.html"}).state("updateDeliveryCost",{url:"/updateDeliveryCost",templateUrl:"templates/updateDeliveryCost.html"}).state("userDetails",{url:"/userDetails",templateUrl:"templates/page_UserDetails.html"})}]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"=?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);
function AlertsCtrl(e){e.alerts=[{type:"success",msg:"Thanks for visiting! Feel free to create pull requests to improve the dashboard!"},{type:"danger",msg:"Found a bug? Create an issue with as many details as you can."}],e.addAlert=function(){e.alerts.push({msg:"Another alert!"})},e.closeAlert=function(t){e.alerts.splice(t,1)}}angular.module("RDash").controller("AlertsCtrl",["$scope",AlertsCtrl]);
function MasterCtrl(e,t,o,a,r,n,i,d){function s(e,t,o){var a="object"!=typeof e?JSON.parse(e):e,r="";if(r+=t+"\r\n\n",o){var n="";for(var i in a[0])n+=i+",";n=n.slice(0,-1),r+=n+"\r\n"}for(var d=0;d<a.length;d++){var n="";for(var i in a[d])n+='"'+a[d][i]+'",';n.slice(0,n.length-1),r+=n+"\r\n"}if(""==r)return void alert("Invalid data");var s="MyReport_";s+=t.replace(/ /g,"_");var c="data:text/csv;charset=utf-8,"+escape(r),l=document.createElement("a");l.href=c,l.style="visibility:hidden",l.download=s+".csv",document.body.appendChild(l),l.click(),document.body.removeChild(l)}e.showToastMessage=!1,e.adminName=t.get("adminName"),t.get("AdminToken")||(window.location.href="#/login",e.showDashboard=!1),t.get("AdminloggedIn")===!1&&(location.href="#/login",e.showDashboard=!1,e.hideDashboard=!0),t.get("AdminloggedIn")===!0&&(e.showDashboard=!0,e.hideLoginPage=!0);var c=window.location;console.log("currentLocation",c.hash),t.get("AdminToken")?e.showDashboard=!0:(e.showDashboard=!1,t.remove("adminId"),t.remove("AdminToken"),t.remove("adminEmailId"),t.put("AdminloggedIn",!1),window.location.href="#/login"),"Admin"===t.get("adminName")?(e.showOrderManagement=!0,e.orderHeight="0px",e.orderColor="#2d3e63",e.marginHeight={"margin-top":"-50px"}):e.showOrderManagement=!1,"#/overView"==window.location.hash&&(e.myObjProd={},e.myUpdateOrder={},e.myObjBanner={},e.myObj={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateUser={},e.myUpdateCat={},e.myUpdateProd={},e.myoverViewObj={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}),e.dashHighlight=function(){e.activeDash="active",e.activeCat="false",e.activeProd="false",e.myObjProd={},e.myUpdateOrder={},e.myObjBanner={},e.myObj={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateUser={},e.myUpdateCat={},e.myUpdateProd={},e.myoverViewObj={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.categoryHighlight=function(){e.activeCat="active",e.activeProd="false",e.myObjProd={},e.myUpdateOrder={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myoverViewObj={},e.myUpdateCat={},e.myObj={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.productHighlight=function(){e.activeProd="active",e.activeCat="false",e.myObj={},e.myUpdateOrder={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateCat={},e.myObjProd={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.bannerHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="active",e.myObj={},e.myObjProd={},e.myUpdateOrder={},e.myoverViewObj={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateCat={},e.myObjBanner={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateCategoryHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="active",e.myObj={},e.myoverViewObj={},e.myObjProd={},e.myObjBanner={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateProd={},e.myUpdateLoc={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateUser={},e.myoverViewObj={},e.myUpdateCat={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateProductHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="active",e.myObj={},e.myoverViewObj={},e.myObjProd={},e.myObjBanner={},e.myUpdateCat={},e.myUpdateOrder={},e.myUpdateBan={},e.myUpdateLoc={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateUser={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myoverViewObj={},e.myUpdateProd={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateBannerHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="active",e.activeUpdateOrder="false",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myUpdateCat={},e.myoverViewObj={},e.myUpdateProd={},e.myUpdateOrder={},e.myUpdateLoc={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateBan={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateOrderHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="false",e.activeUpdateUser="false",e.activeUpdateOrder="active",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateCat={},e.myUpdateProd={},e.myUpdateBan={},e.myUpdateUser={},e.myUpdateLoc={},e.myoverViewObj={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateOrder={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateUserHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="false",e.activeUpdateOrder="false",e.activeUpdateUser="active",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateCat={},e.myUpdateProd={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateUser={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.locationHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="false",e.activeUpdateOrder="false",e.activeUpdateUser="false",e.activeUpdateLoc="active",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateCat={},e.myUpdateProd={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateScoutLoc={},e.myUpdateShipping={},e.myUpdateLoc={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.ScoutlocationHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="false",e.activeUpdateOrder="false",e.activeUpdateUser="false",e.activeUpdateLoc="false",e.activeUpdateScoutLoc="active",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateCat={},e.myUpdateProd={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateLoc={},e.myUpdateShipping={},e.myUpdateScoutLoc={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.updateShippingHighlight=function(){e.activeProd="false",e.activeCat="false",e.activeBanner="false",e.activeUpdateCat="false",e.activeUpdateProd="false",e.activeUpdateBan="false",e.activeUpdateOrder="false",e.activeUpdateUser="false",e.activeUpdateLoc="false",e.activeUpdateScoutLoc="false",e.activeUpdateShipping="active",e.myObj={},e.myObjProd={},e.myObjBanner={},e.myoverViewObj={},e.myUpdateCat={},e.myUpdateProd={},e.myUpdateBan={},e.myUpdateOrder={},e.myUpdateUser={},e.myUpdateLoc={},e.myUpdateScoutLoc={},e.myUpdateShipping={color:"white","border-left":"3px solid #e99d1a","text-indent":"22px",background:"#2d3e63"}},e.liveOrders={cursor:"default","background-color":"#fff",border:"1px solid #ddd","border-bottom-color":"transparent"},e.pastOrders=function(){e.liveOrders={}},e.acceptedOrders=function(){e.liveOrders={},e.pastOrders={}},e.outfordeliveryOrders=function(){e.liveOrders={},e.pastOrders={}},e.completedOrders=function(){e.liveOrders={},e.pastOrders={}},e.cancelledOrders=function(){e.liveOrders={},e.pastOrders={}},console.log("$state.current.name",window.location.hash);var l=992;e.getWidth=function(){return window.innerWidth},e.$watch(e.getWidth,function(o,a){o>=l?angular.isDefined(t.get("toggle"))?e.toggle=!!t.get("toggle"):e.toggle=!0:e.toggle=!1}),e.toggleSidebar=function(){e.toggle=!e.toggle,t.put("toggle",e.toggle)},window.onresize=function(){e.$apply()};var p="http://34.206.42.77:9000",u=t.get("AdminToken");e.loginAdmin=function(){e.showDashboard=!0;var a={email:e.email,password:e.password},r={headers:{"Content-Type":"application/json"}};o.post(p+"/auth/local",a,r).success(function(o,a,r,n){e.loginData=o,console.log("loginData",o),t.put("AdminToken",o.token),t.put("adminId",o._id),t.put("adminName",o.name),t.put("adminEmailId",e.email),t.put("AdminloggedIn",!0),location.reload(!0),"Admin"===t.get("adminName")&&(window.location.href="#/orderManagement"),"SuperAdmin"===t.get("adminName")&&(window.location.href="#/overView")}).error(function(t,o,a,r){e.erroralert=!0,e.errorMessage=t.message,e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.logout=function(){location.reload(!0),t.remove("adminId"),t.remove("AdminToken"),t.remove("adminEmailId"),t.remove("adminName"),t.put("AdminloggedIn",!1),e.showDashboard=!1,r.path("/login"),$window.location.reload(),location.reload()},e.postDepartment=function(){var t={name:e.departmentName,description:e.descriptionOfDepartment,isActive:e.departmentIsActive},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/departments",t,a).success(function(t,o,a,r){e.PostDataResponse=t,console.log("dataa",t),alert("Department  added")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.postCategory=function(){var t={name:e.categoryName,department:1,isActive:!0},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/categories",t,a).success(function(t,o,a,r){e.PostDataResponse=t,console.log("dataa",t),window.location.reload(!0),alert("New Category Added!!")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getDepartment=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/departments",t).success(function(t,o,a,r){e.getDepartmentList=t,console.log("get departments",t),console.log("getDepartmentList",e.getDepartmentList)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getDepartment(),e.getCategory=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/categories",t).success(function(t,o,a,r){e.getCategoriesList=t,console.log("get Categories",t),console.log("categoryName",e.categoryName)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r,window.location.href="#/login"})},e.getCategory(),e.getCategoryName=function(t){console.log("categoryName",t),e.categoryName=t},e.getdepartmentId=function(t){console.log("deptName",t),e.deptName=t},e.calcDiscount=function(){e.productSalePrice=Math.round(e.productlistPrice-e.productlistPrice*e.discountedPrice/100),console.log("$scope.productSalePrice",e.productSalePrice)},e.postProduct=function(){var t="no subcat",a={name:e.productName,description:e.productDescription,dept:"nonveg",cat:e.categoryName,subCat:t,sku:"abcd12345",brand:"abcd",s1:e.productImageUrl1,s2:e.productImageUrl2,s3:e.productImageUrl3,p1:e.productOffer,p2:"abcd",mainImageUrl:e.productImageUrl,vendorID:100,quantity:e.productquantity,listPrice:e.productlistPrice,salePrice:e.productSalePrice,discountedPrice:e.discountedPrice,instock:e.instock,isActive:e.productisActive},r={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/products",a,r).success(function(t,o,a,r){e.PostDataResponse=t,console.log("dataa",t),e.updateAutocomplete(),window.location.reload(!0),alert("New Product Added")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.updateAutocomplete=function(){var t={},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/products/updateAutoComplete",t,a).success(function(t,o,a,r){e.updateAutocomplete=t,console.log("updateAutocomplete",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getProduct=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/products",t).success(function(t,o,a,r){e.getProductList=t,console.log("get products",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getProduct(),e.getBanner=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/banner",t).success(function(t,o,a,r){e.getBanner=t,console.log("get getBanner",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getBanner(),e.postBanner=function(){var t={banner_image:e.banner_image,name:e.banner_name,desc:e.banner_desc},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/banner",t,a).success(function(t,o,a,r){e.postBanner=t,console.log("dataa",t),window.location.reload(!0),alert("Banner Created")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getproductId=function(t){console.log(t);for(var o=0;o<e.getProductList.length;o++)t===e.getProductList[o].name&&(e.productid=e.getProductList[o]._id);console.log(e.productid)},e.editCategory=function(t,o,a,r){$("#editModalCategory").modal("show"),console.log(t,o,a,r),e.cat_Id=t,e.categoryName=o,e.categoryId=a,e.categoryIsActive=r,e.showCategoryButton=!1},e.updateCategory=function(){e.loadingIcon=!0,e.showCategoryButton=!1;var t={name:e.categoryName,department:1,isActive:!0},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.put(p+"/api/categories/"+e.cat_Id,t,a).success(function(t,o,a,r){e.updateCategory=t,console.log("updateCategory",t),e.loadingIcon=!1,e.getCategory(),location.reload(!0),alert("Updated Category")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.deleteCategory=function(t){e.loadingIcon=!0,console.log("catId",t);var a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},r=confirm("Deleted category");return r!==!1&&void o["delete"](p+"/api/categories/"+t,a).success(function(t,o,a,r){console.log("delete category",t),e.getCategory(),e.loadingIcon=!1}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.cancelCat=function(){$("#editModalCategory").modal("hide")},e.editProduct=function(t){e.showProductButton=!1,$("#editModal").modal("show"),e.productId=t;for(var o=0;o<e.getProductList.length;o++)e.getProductList[o]._id===t&&(e.productName=e.getProductList[o].name,e.productDescription=e.getProductList[o].description,e.departmentSelected=e.getProductList[o].dept,e.categorySelected=e.getProductList[o].cat,e.productOffer=e.getProductList[o].p1,e.productImageUrl=e.getProductList[o].mainImageUrl,e.productImageUrl1=e.getProductList[o].s1,e.productImageUrl2=e.getProductList[o].s2,e.productImageUrl3=e.getProductList[o].s3,e.productquantity=e.getProductList[o].quantity,e.productlistPrice=e.getProductList[o].listPrice,e.productSalePrice=e.getProductList[o].salePrice,e.discountedPrice=e.getProductList[o].discountedPrice,e.instock=e.getProductList[o].instock,e.productisActive=e.getProductList[o].isactive.toString())},e.updateProduct=function(){e.showProductButton=!1,e.loadingIcon=!0;var t="no subcat",a={name:e.productName,description:e.productDescription,dept:"nonveg",cat:e.categorySelected,subCat:t,sku:"abcd12345",brand:"abcd",s1:e.productImageUrl1,s2:e.productImageUrl2,s3:e.productImageUrl3,p1:e.productOffer,p2:"abcd",mainImageUrl:e.productImageUrl,vendorID:100,quantity:e.productquantity,listPrice:e.productlistPrice,salePrice:e.productSalePrice,discountedPrice:e.discountedPrice,instock:e.instock,isActive:e.productisActive},r={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.put(p+"/api/products/"+e.productId,a,r).success(function(t,o,a,r){e.updateProd=t,console.log("updateProduct",t),e.loadingIcon=!1,e.getProduct(),e.updateAutocomplete(),alert("Updated Product"),$("#editModal").modal("hide")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.cancelProduct=function(){e.productName="",e.productDescription="",e.departmentSelected="",e.categorySelected="",e.productImageUrl1="",e.productImageUrl2="",e.productImageUrl3="",e.productOffer="",e.productImageUrl="",e.productquantity="",e.productlistPrice="",e.productSalePrice="",e.discountedPrice="",e.instock="",e.productisActive="",e.showProductButton=!1,$("#editModal").modal("hide")},e.deleteProduct=function(t){console.log("productId",t);var a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},r=confirm("Product to be Deleted");return r!==!1&&void o["delete"](p+"/api/products/"+t,a).success(function(t,o,a,r){console.log("delete product",t),e.getProduct()}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.editTodayDeals=function(t){console.log(t);for(var o=0;o<e.getTodayDealsList.length;o++)e.getTodayDealsList[o]._id===t&&(e.fromDate=e.getTodayDealsList[o].fromDate)},e.deleteBanner=function(t){console.log("dealId",t);var a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},r=confirm("Banner to be deleted");return r!==!1&&void o["delete"](p+"/api/banner/"+t,a).success(function(t,o,a,r){console.log("delete product",t),window.location.reload(!0),e.getBanner()}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllOrders=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/orders",t).success(function(t,o,a,r){e.getAllOrdersList=t,e.getAllOrdersListLength=t.length;for(var n=0;n<e.getAllOrdersList.length;n++)e.getInProgress=e.getAllOrdersList[n].orderStatus.name,e.getInProgressLength=e.getInProgress.length,console.log("$scope.getInProgressLength",e.getInProgressLength);console.log("get getAllOrdersList",t),e.getAllUsers()}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllOrders(),e.clearSearchResult=function(){e.searchFilter="",e.getAllOrders()},e.getUserinfoOrders=function(t){console.log("$scope.",e.getAllUserList);for(var o=0;o<e.getAllUserList.length;o++)(e.getAllUserList[o]._id=t)&&(e.userByOrder=e.getAllUserList[o],console.log("$scope.userByOrder",e.userByOrder))},e.getAllOrderStatus=function(){var t={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/orderStatus",t).success(function(t,o,a,r){e.getAllOrdersStatusList=t,console.log("get getAllOrdersStatusList",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllOrderStatus(),e.orderStatusChangedValue=function(t){console.log("orderStatusname",t),e.selectedOrderStatusId=t;for(var o=0;o<e.getAllOrdersStatusList.length;o++)e.getAllOrdersStatusList[o]._id==t&&(e.orderStatusObj=e.getAllOrdersStatusList[o],console.log("$scope.orderStatusObj",e.orderStatusObj))},e.editOrderStatus=function(t){e.loadingIcon=!0;var a={orderStatus:e.orderStatusObj},r={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.put(p+"/api/orders/"+t,a,r).success(function(o,a,r,n){e.updateCategory=o,console.log("updateCategory",o),e.loadingIcon=!1,e.getAllOrders(),alert("OrderNo"+t+" is Updated")}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.invoiceDetails=function(t,a,r){console.log(t,a,r),e.user_email=a,e.user_phone=r;var n={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.get(p+"/api/orders/"+t,n).success(function(t,o,a,r){e.getByorderId=t,console.log("$scope.getByorderId",e.getByorderId)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getTotalProductAmount=function(t,o,a){console.log("totalProductCost",t,a,o),e.thistotalProductCost=t;var r=t*o;e.shippingDeliveryCost=a-r,console.log()},e.printInvoice=function(){var e=$("#printArea").html(),t=$("#printframe")[0].contentWindow.document,o=document.body.html;$("#invoiceModal").css({display:"block"}),t.open(),t.write('<!DOCTYPE html><html><head><title>Customer copy of bill</title><link rel="stylesheet" ></head><body><div><table class="table table-condensed">'+e+"</table></div></html>"),t.close(),$("#printframe")[0].contentWindow.print(),document.body.html=o},e.exportToExcel=function(){e.gettingReportData=[],angular.forEach(e.getAllOrdersList,function(t,o){var a={"Order Id":t._id,"Order Date":t.orderDate,"User Name":t.userID.name,"User Email":t.userID.email,"Mobile Number":t.userID.mobile_number,"Order Amount":t.orderAmount,"Order Status":t.orderStatus.name};e.gettingReportData.push(a)}),console.log("gettingReportData",e.gettingReportData),s(e.gettingReportData,"Order Report",!0)},e.filterBydate=function(t){console.log("toDate",t);var o=new Date(t).toString().split(" ").slice(0,4).join(" ");console.log("todayDate",o);for(var a=0;a<e.getAllOrdersList.length;a++){e.ordatesList=e.getAllOrdersList[a].orderDate,console.log("$scope.ordatesList",e.ordatesList);var r=new Date(e.ordatesList);r.toString();var n=new Date(e.ordatesList).toString().split(" ").slice(0,4).join(" ");console.log("ordatesList",n),o==n&&(e.dateList=e.ordatesList,console.log("$scope.dateList",e.ordatesList))}},e.showAllOrders=function(){e.dateList=""},e.getAllUsers=function(){var t={headers:{"Content-Type":"application/json"}};o.get(p+"/api/users",t).success(function(t,o,a,r){e.getAllUserList=t,e.allusersLength=t.length,console.log("get getAllUserList",t.length)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllUsers(),e.updateUser=function(t,a){console.log("sel",e.sel),e.loadingIcon=!0,e.selectedValue=$("#sel11 :selected").val();var r={headers:{"Content-Type":"application/json"}},n={isactive:a};o.put(p+"/api/users/"+t,n,r).success(function(t,o,a,r){e.getIsActiveUpdated=t,console.log("get getAllUserList",t),e.loadingIcon=!1,e.getAllUsers()}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllFeedbacks=function(){var t={headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};o.get(p+"/api/order/feedback",t).success(function(t,o,a,r){e.getAllFeedbacks=t,e.getAllFeedbacksLength=t.length,console.log("get getAllFeedbacks",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllFeedbacks(),e.userNamesFeeback=function(t){for(var o=0;o<e.getAllUserList.length;o++)e.getAllUserList[o]._id===t&&(e.names=e.getAllUserList[o].name,e.mobiles=e.getAllUserList[o].mobile_number,e.emails=e.getAllUserList[o].email,console.log("$scope.getAllUserList[i].name;",e.getAllUserList[o].name))},e.getAllLocationDeliver=function(){var t={headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};o.get(p+"/api/deliver/Location",t).success(function(t,o,a,r){e.getAllLocationDeliver=t,console.log("get getAllLocationDeliver",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllLocationDeliver(),e.loadGoogleMap=function(){var t=new google.maps.places.Autocomplete(document.getElementById("txtPlaces"));google.maps.event.addListener(t,"place_changed",function(){var o=t.getPlace(),a=o.formatted_address,r=o.geometry.location.lat(),n=o.geometry.location.lng();o.id,o.place_id;e.address=a,e.latitude=r,e.longitude=n,console.log("address",e.address),console.log("latitude",e.latitude),console.log("longitude",e.longitude)})},e.loadGoogleMap(),e.postLocation=function(){e.loadingIcon=!0;var t={lat:e.latitude,lng:e.longitude,name:e.address,place_id:"ChIJeQ08aCoVXz4Rf-s_ZKsCaFQ"},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.post(p+"/api/deliver/Location",t,a).success(function(t,o,a,r){e.postLocationDeliver=t,console.log("dataa",t),e.loadingIcon=!1,alert("Places we deliver added "),window.location.reload(!0)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.deleteLocactionDeliver=function(t){console.log("locId",t),e.loadingIcon=!0;var a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},r=confirm("Deleted"+t+"Location we deliver");return r!==!1&&void o["delete"](p+"/api/deliver/Location/"+t,a).success(function(t,o,a,r){console.log("delete deleteLocactionDeliver",t),e.loadingIcon=!1,window.location.reload(!0)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getAllLocationDeliver(),e.getListScoutLoc=function(){var t={headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};o.get(p+"/api/scout/user/Location",t).success(function(t,o,a,r){e.getListScoutLoc=t,console.log("get getListScoutLoc",t)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getListScoutLoc(),e.scoutNamesCount=function(t){for(var o=0;o<e.getListScoutLoc.length;o++)if(e.getListScoutLoc[o].name=t)return e.getListScoutLoc[o].name.length},e.getDeliveryCost=function(){var t={headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};o.get(p+"/api/admin/config",t).success(function(t,o,a,r){e.getDeliveryCost=t,e.getOrderDeliveryCost=t[0].deliveryOrderAmount,e.getOrderMinCost=t[0].minimumOrderAmount,console.log("get getDeliveryCost",t),console.log("cond",e.getOrderMinCost,e.thistotalProductCost),e.getOrderMinCost<=e.thistotalProductCost&&(e.showDeliveryCost=!0)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})},e.getDeliveryCost(),e.updateDeliveryCost=function(){e.loadingIcon=!0;var t={minimumOrderAmount:e.minimumCost,deliveryOrderAmount:e.deliveryCost},a={headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};o.put(p+"/api/admin/config/1",t,a).success(function(t,o,a,r){e.updatedDeliverycost=t,e.loadingIcon=!1,console.log("dataa",t),alert("DeliveryCost Updated "),window.location.reload(!0)}).error(function(t,o,a,r){e.ResponseDetails="Data: "+t+"<hr />status: "+o+"<hr />headers: "+a+"<hr />config: "+r})}}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","$http","$location","$state","$stateParams","$filter",MasterCtrl]);